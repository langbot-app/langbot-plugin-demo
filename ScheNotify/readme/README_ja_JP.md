# ScheNotify

自然言語でスケジュール通知を計画

## 機能紹介

ScheNotify は LangBot プラグインで、ユーザーが自然言語で LLM と対話してタイマーリマインダーを設定できます。

### 主な機能

- 🤖 **自然言語対話**：LLM を通じてユーザーのスケジュール意図を理解
- ⏰ **スマートな時間解析**：現在時刻を自動取得し、リマインダー時刻を計算
- 🌐 **多言語サポート**：中国語と英語のリマインダーメッセージに対応
- 📝 **スケジュール管理コマンド**：予定されたリマインダーの表示と削除
- 🔔 **自動通知**：設定時刻になると自動的にリマインダーメッセージを送信

## 設定

### 言語設定

プラグイン設定でリマインダーメッセージの言語を選択できます：

- `zh_Hans` (簡体字中国語) - デフォルト
- `en_US` (英語)

## 使用方法

### 1. LLM でリマインダーを設定

自然言語で LLM にスケジュールを伝えるだけです：

**例：**
```
明日の午後3時に会議のリマインダー
明後日の午前9時にレポート提出のリマインダー
来週月曜日の正午に昼食のリマインダー
2024-12-25 18:00 にクリスマスディナーのリマインダー
```

LLM は自動的に：
1. `get_current_time_str` を呼び出して現在時刻を取得
2. 時間表現を解析して標準形式に変換
3. `schedule_notify` を呼び出してリマインダーを作成

### 2. 予定されたリマインダーを表示

コマンドを使用してすべての予定されたリマインダーを表示：

```
!sche
```

出力例：
```
[Notify] 計画中のリマインダー：
#1 2024-12-25 18:00:00：クリスマスディナー
#2 2024-12-26 09:00:00：レポート提出
```

### 3. リマインダーを削除

コマンドを使用して指定したリマインダーを削除（`!sche` で表示された番号を使用）：

```
!dsche i <番号>
```

例：
```
!dsche i 1   # 1番目のリマインダーを削除
```

## コンポーネント説明

### ツール

1. **get_current_time_str** - 現在時刻を取得
   - 戻り値の形式：`YYYY-MM-DD HH:MM:SS`
   - LLM はリマインダー設定前にこのツールを呼び出す必要があります

2. **schedule_notify** - 通知を計画
   - パラメータ：時刻文字列、リマインダー内容
   - session パラメータからセッション情報を自動取得してリマインダーを送信

### コマンド

1. **sche** (エイリアス: s) - すべての予定されたリマインダーを一覧表示
2. **dsche** (エイリアス: d) - 指定したリマインダーを削除

## 技術詳細

- 定期チェック間隔：60 秒ごと
- 時間精度：分レベル（プログラムは毎分チェック）
- セッション取得：Tool の session パラメータを通じて自動取得
- 永続化：現在はメモリストレージを使用（再起動後は消失）

## 対話例

**ユーザー：** 明日の午後2時に会議参加のリマインダー

**LLM：** 承知しました、リマインダーを設定します。

*[LLM が get_current_time_str を呼び出し]*
*[LLM が schedule_notify(time_str="2024-12-26 14:00:00", message="会議参加") を呼び出し]*

**LLM：** 設定が完了しました！2024-12-26 14:00:00 にリマインドします：会議参加

*[翌日の午後2時]*

**ボット：** [Notify] 会議参加

## 注意事項

- リマインダー時刻は未来の時刻である必要があり、過去の時刻は拒否されます
- リマインダーメッセージは、リマインダーを設定したセッションと同じセッションに送信されます
- プラグイン再起動後、未送信のリマインダーは消失します（将来のバージョンで永続化をサポート予定）

## 開発者情報

- 作者：RockChinQ
- バージョン：0.2.0
- プラグインタイプ：LangBot Plugin v1

## License

Part of the LangBot plugin ecosystem.
